"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _logger=_interopRequireDefault(require("../../../../utils/logger"));var _formatErrors=_interopRequireDefault(require("../../../../utils/formatErrors"));var _permission=require("../../../../utils/permission");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};var ownKeys=Object.keys(source);if(typeof Object.getOwnPropertySymbols==='function'){ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}ownKeys.forEach(function(key){_defineProperty(target,key,source[key]);});}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var _default=_permission.requireAuth.createResolver(async(parent,args,{models,user})=>{try{const response=await models.sequelize.transaction(async()=>{const team=await models.Team.create(_objectSpread({},args,{owner:user.id}));await models.Channel.create({name:'general',public:true,teamId:team.id});return team;});console.log(response);return{ok:true,team:response};}catch(err){_logger.default.error(err);return{ok:false,errors:(0,_formatErrors.default)(err,models)};}});exports.default=_default;
//# sourceMappingURL=addTeam.js.map