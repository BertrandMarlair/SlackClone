{"version":3,"sources":["../../../../../src/schema/models/channel/resolvers/addChannel.js"],"names":["requireAuth","createResolver","parent","args","models","team","Team","findOne","where","id","teamId","ower","userInfo","ok","errors","path","message","channel","Channel","create","err","log","error"],"mappings":"6FAAA,wEACA,oFACA,wDACA,sB,gGAEeA,wBAAYC,cAAZ,CACX,MAAOC,MAAP,CAAeC,IAAf,CAAqB,CAAEC,MAAF,CAArB,GAAmC,CAC/B,GAAI,CACA,KAAMC,CAAAA,IAAI,CAAG,KAAMD,CAAAA,MAAM,CAACE,IAAP,CAAYC,OAAZ,CAAoB,CAACC,KAAK,CAAE,CAAEC,EAAE,CAAEN,IAAI,CAACO,MAAX,CAAR,CAApB,CAAnB,CACA,GAAIL,IAAI,CAACM,IAAL,GAAcC,aAASH,EAA3B,CAA+B,CAC3B,MAAO,CACHI,EAAE,CAAE,KADD,CAEHC,MAAM,CAAE,CAAC,CAAEC,IAAI,CAAE,MAAR,CAAgBC,OAAO,CAAE,qDAAzB,CAAD,CAFL,CAAP,CAIH,CACD,KAAMC,CAAAA,OAAO,CAAG,KAAMb,CAAAA,MAAM,CAACc,OAAP,CAAeC,MAAf,CAAsBhB,IAAtB,CAAtB,CACA,MAAO,CACHU,EAAE,CAAE,IADD,CAEHI,OAFG,CAAP,CAIH,CAAC,MAAOG,GAAP,CAAY,CACVC,gBAAIC,KAAJ,CAAUF,GAAV,EACA,MAAO,CACHP,EAAE,CAAE,KADD,CAEHC,MAAM,CAAE,0BAAaM,GAAb,CAAkBhB,MAAlB,CAFL,CAAP,CAIH,CACJ,CAtBU,C","sourcesContent":["import log from \"../../../../utils/logger\";\nimport formatErrors from '../../../../utils/formatErrors'\nimport { requireAuth } from '../../../../utils/permission'\nimport { userInfo } from \"os\";\n\nexport default requireAuth.createResolver(\n    async (parent, args, { models }) =>{\n        try {\n            const team = await models.Team.findOne({where: { id: args.teamId }})\n            if (team.ower === userInfo.id ){\n                return {\n                    ok: false,\n                    errors: [{ path: 'name', message: 'You have to be owner of the team for create channel'}]\n                }\n            }\n            const channel = await models.Channel.create(args)\n            return {\n                ok: true,\n                channel\n            }\n        } catch (err) {\n            log.error(err)\n            return {\n                ok: false,\n                errors: formatErrors(err, models)\n            }\n        }\n    }\n)"],"file":"addChannel.js"}