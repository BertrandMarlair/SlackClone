"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _bcrypt=_interopRequireDefault(require("bcrypt"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var _default=(sequelize,DataTypes)=>{const User=sequelize.define("user",{username:{type:DataTypes.STRING,unique:true,validate:{isAlphanumeric:{args:true,msg:"The username can only contain lettres ans numbers"},len:{args:[3,25],msg:"The username needs to be between 3 and 25 characters long"}}},email:{type:DataTypes.STRING,unique:true,validate:{isEmail:{args:true,msg:"Invalid email"}}},password:{type:DataTypes.STRING,validate:{len:{args:[3,100],msg:"The password needs to be between 3 and 100 characters long"}}}},{hooks:{afterValidate:async user=>{const hashedPassword=await _bcrypt.default.hash(user.password,12);user.password=hashedPassword;}}});User.associate=models=>{User.belongsToMany(models.Team,{through:"member",foreignKey:{name:"userId",field:"user_id"}});User.belongsToMany(models.Channel,{through:"channel_member",foreignKey:{name:"userId",field:"user_id"}});};return User;};exports.default=_default;
//# sourceMappingURL=index.js.map