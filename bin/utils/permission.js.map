{"version":3,"sources":["../../src/utils/permission.js"],"names":["createResolver","resolver","baseResolver","childResolver","newResolver","parent","args","context","info","requireAuth","user","id","Error","requireAdmin","isAdmin"],"mappings":"sHAAA,KAAMA,CAAAA,cAAc,CAAIC,QAAD,EAAc,CACjC,KAAMC,CAAAA,YAAY,CAAGD,QAArB,CACAC,YAAY,CAACF,cAAb,CAA+BG,aAAD,EAAmB,CAC7C,KAAMC,CAAAA,WAAW,CAAG,MAAOC,MAAP,CAAeC,IAAf,CAAqBC,OAArB,CAA8BC,IAA9B,GAAuC,CACvD,KAAMP,CAAAA,QAAQ,CAACI,MAAD,CAASC,IAAT,CAAeC,OAAf,CAAwBC,IAAxB,CAAd,CACA,MAAOL,CAAAA,aAAa,CAACE,MAAD,CAASC,IAAT,CAAeC,OAAf,CAAwBC,IAAxB,CAApB,CACH,CAHD,CAIA,MAAOR,CAAAA,cAAc,CAACI,WAAD,CAArB,CACH,CAND,CAOA,MAAOF,CAAAA,YAAP,CACH,CAVD,CAYO,KAAMO,CAAAA,WAAW,CAAGT,cAAc,CAAC,CAACK,MAAD,CAASC,IAAT,CAAe,CAACI,IAAD,CAAf,GAA0B,CAChE,GAAI,CAACA,IAAD,EAAS,CAACA,IAAI,CAACC,EAAnB,CAAuB,CACnB,KAAM,IAAIC,CAAAA,KAAJ,CAAU,mBAAV,CAAN,CACH,CACJ,CAJwC,CAAlC,C,gCAMA,KAAMC,CAAAA,YAAY,CAAGJ,WAAW,CAACT,cAAZ,CAA2B,CAACK,MAAD,CAASC,IAAT,CAAe,CAACI,IAAD,CAAf,GAA0B,CAC7E,GAAI,CAACA,IAAI,CAACI,OAAV,CAAmB,CACf,KAAM,IAAIF,CAAAA,KAAJ,CAAU,uBAAV,CAAN,CACH,CACJ,CAJ2B,CAArB,C","sourcesContent":["const createResolver = (resolver) => {\n    const baseResolver = resolver;\n    baseResolver.createResolver = (childResolver) => {\n        const newResolver = async (parent, args, context, info) => {\n            await resolver(parent, args, context, info);\n            return childResolver(parent, args, context, info);\n        };\n        return createResolver(newResolver);\n    };\n    return baseResolver;\n};\n\nexport const requireAuth = createResolver((parent, args, {user}) => {\n    if (!user || !user.id) {\n        throw new Error('Not authenticated');\n    }\n});\n\nexport const requireAdmin = requireAuth.createResolver((parent, args, {user}) => {\n    if (!user.isAdmin) {\n        throw new Error('Requires admin access');\n    }\n});"],"file":"permission.js"}